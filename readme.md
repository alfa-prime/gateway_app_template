# –®–∞–±–ª–æ–Ω –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –¥–ª—è —à–ª—é–∑–∞ –ï–í–ú–ò–ê–° API

–≠—Ç–æ—Ç —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π –≥–æ—Ç–æ–≤—ã–π —à–∞–±–ª–æ–Ω –¥–ª—è –±—ã—Å—Ç—Ä–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π, –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤—É—é—â–∏—Ö —Å–æ —à–ª—é–∑–æ–º –ï–í–ú–ò–ê–° API. –û–Ω –≤–∫–ª—é—á–∞–µ—Ç –≤ —Å–µ–±—è –Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π HTTP-–∫–ª–∏–µ–Ω—Ç –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –∑–∞–ø—Ä–æ—Å–æ–≤ –∏ –º–µ—Ö–∞–Ω–∏–∑–º –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –ø–æ API-–∫–ª—é—á—É.

–í –∫–∞—á–µ—Å—Ç–≤–µ –ø—Ä–∏–º–µ—Ä–∞ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω —Ä–æ—É—Ç `/health`, –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É—é—â–∏–π –ø—Ä–æ–≤–µ—Ä–∫—É —Å–≤—è–∑–∏ —Å–æ —à–ª—é–∑–æ–º.

---

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

–ü–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º —Ä–∞–±–æ—Ç—ã —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É –≤–∞—Å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã:

- Git  
- Docker  
- Docker Compose  

---

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è

–ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –≤ –ø–∞–ø–∫—É —Å –∂–µ–ª–∞–µ–º—ã–º –∏–º–µ–Ω–µ–º –≤–∞—à–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `my_super_app`).

```bash
git clone ssh://git@gitverse.ru:2222/imperium/gateway_app_template.git my_super_app
```

–ï—Å–ª–∏ –Ω–µ —É–∫–∞–∑–∞—Ç—å `my_super_app`, –ø—Ä–æ–µ–∫—Ç –±—É–¥–µ—Ç —Å–∫–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω –≤ –ø–∞–ø–∫—É `gateway_app_template`.

---

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

–°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ñ–∞–π–ª —Å –ø—Ä–∏–º–µ—Ä–æ–º –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è –∏ —É–∫–∞–∂–∏—Ç–µ –≤–∞—à –∫–ª—é—á –¥–æ—Å—Ç—É–ø–∞ –∫ —à–ª—é–∑—É.

```bash
# –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –ø–∞–ø–∫—É –ø—Ä–æ–µ–∫—Ç–∞
cd my_super_app

# –°–∫–æ–ø–∏—Ä—É–π—Ç–µ .env.example –≤ .env
cp .env.example .env
```

–û—Ç–∫—Ä–æ–π—Ç–µ —Ñ–∞–π–ª `.env` –∏ –∑–∞–º–µ–Ω–∏—Ç–µ `super-puper-secret-gateway-key` –Ω–∞ –≤–∞—à —Ä–µ–∞–ª—å–Ω—ã–π `GATEWAY_API_KEY`.

```dotenv
# .env
GATEWAY_URL=http://192.168.0.249:8777/
GATEWAY_API_KEY=–≤–∞—à-—Ä–µ–∞–ª—å–Ω—ã–π-–∫–ª—é—á-–¥–æ—Å—Ç—É–ø–∞
GATEWAY_REQUEST_ENDPOINT=gateway/request
```

---

### 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∏–º–µ–Ω –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤

–ß—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ –∏ —Å–¥–µ–ª–∞—Ç—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏ —É–¥–æ–±–Ω–µ–µ, –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –∑–∞–¥–∞—Ç—å —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ –∏–º–µ–Ω–∞ –¥–ª—è –≤–∞—à–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è. –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–¥–Ω–æ –∏ —Ç–æ –∂–µ –±–∞–∑–æ–≤–æ–µ –∏–º—è.  

–ü—Ä–∏–º–µ—Ä: `my_super_app`

–í–∞–º –Ω—É–∂–Ω–æ –∑–∞–º–µ–Ω–∏—Ç—å —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ –∏–º—è `gateway_template_app` –Ω–∞ –≤–∞—à–µ `my_super_app` –≤ —Å–ª–µ–¥—É—é—â–∏—Ö —Ñ–∞–π–ª–∞—Ö:

- **docker-compose.yml**:  
  `container_name: gateway_template_app ‚Üí container_name: my_super_app`

- **docker-compose.prod.yml**:  
  `container_name: gateway_template_app_prod ‚Üí container_name: my_super_app_prod`

- **makefile**:  
  –í —Å–µ–∫—Ü–∏–∏ Development: `gateway_template_app ‚Üí my_super_app`  
  –í —Å–µ–∫—Ü–∏–∏ Production: `gateway_template_app_prod ‚Üí my_super_app_prod`  

> ‚ö†Ô∏è –ü–æ—á–µ–º—É —ç—Ç–æ –≤–∞–∂–Ω–æ? –ö–æ–º–∞–Ω–¥—ã –≤ makefile (–Ω–∞–ø—Ä–∏–º–µ—Ä, `make bash`) –æ–±—Ä–∞—â–∞—é—Ç—Å—è –∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—É –ø–æ –µ–≥–æ –∏–º–µ–Ω–∏. –ï—Å–ª–∏ –∏–º–µ–Ω–∞ –Ω–µ —Å–æ–≤–ø–∞–¥—É—Ç, –∫–æ–º–∞–Ω–¥—ã –Ω–µ –±—É–¥—É—Ç —Ä–∞–±–æ—Ç–∞—Ç—å.

---

### 4. –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

**–î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ (—Å live-reload):**

```bash
make up
```
–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ –ø–æ –∞–¥—Ä–µ—Å—É:  
üëâ [http://localhost:8000](http://localhost:8000)

**–î–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞:**

```bash
make up-prod
```
–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ –ø–æ –∞–¥—Ä–µ—Å—É:  
üëâ [http://localhost:8778](http://localhost:8778)

---

## –î–æ—Å—Ç—É–ø–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã (makefile)

### –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

| –ö–æ–º–∞–Ω–¥–∞     | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------------|----------|
| `make up`   | –°–æ–±—Ä–∞—Ç—å –∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏. |
| `make down` | –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∏ —É–¥–∞–ª–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏. |
| `make bash` | –û—Ç–∫—Ä—ã—Ç—å –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—É—é —Å–µ—Å—Å–∏—é bash –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞. |

### –ü—Ä–æ–¥–∞–∫—à–µ–Ω

| –ö–æ–º–∞–Ω–¥–∞         | –û–ø–∏—Å–∞–Ω–∏–µ |
|-----------------|----------|
| `make up-prod`  | –°–æ–±—Ä–∞—Ç—å –∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –≤ —Ñ–æ–Ω–æ–≤–æ–º —Ä–µ–∂–∏–º–µ (production). |
| `make down-prod`| –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∏ —É–¥–∞–ª–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞. |
| `make logs-prod`| –ü–æ–∫–∞–∑–∞—Ç—å –∏ –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –ª–æ–≥–∏ —Ä–∞–±–æ—Ç–∞—é—â–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è. |
| `make bash-prod`| –û—Ç–∫—Ä—ã—Ç—å –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—É—é —Å–µ—Å—Å–∏—é bash –≤–Ω—É—Ç—Ä–∏ prod-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞. |

### –û–±—â–∏–µ

| –ö–æ–º–∞–Ω–¥–∞      | –û–ø–∏—Å–∞–Ω–∏–µ |
|--------------|----------|
| `make clean` | –£–¥–∞–ª–∏—Ç—å –≤—Å–µ –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ Docker-–æ–±—Ä–∞–∑—ã, –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã, —Ç–æ–º–∞ –∏ —Å–µ—Ç–∏. |

---

## –¢–µ—Å—Ç–æ–≤—ã–π —ç–Ω–¥–ø–æ–∏–Ω—Ç (/health)

–î–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ —Å–µ—Ä–≤–∏—Å–∞ –∏ —Å–≤—è–∑–∏ —Å–æ —à–ª—é–∑–æ–º –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–ª–µ–¥—É—é—â–∏–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã.  
–ù–µ –∑–∞–±—É–¥—å—Ç–µ –ø–µ—Ä–µ–¥–∞—Ç—å –≤–∞—à `X-API-KEY` –≤ –∑–∞–≥–æ–ª–æ–≤–∫–∞—Ö.

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ —Å–µ—Ä–≤–∏—Å–∞

**–ó–∞–ø—Ä–æ—Å:**

```bash
curl -X GET http://localhost:8000/health/   -H "X-API-KEY: –≤–∞—à-—Ä–µ–∞–ª—å–Ω—ã–π-–∫–ª—é—á-–¥–æ—Å—Ç—É–ø–∞"
```

**–£—Å–ø–µ—à–Ω—ã–π –æ—Ç–≤–µ—Ç:**

```json
{
  "ping": "pong"
}
```

---

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–≤—è–∑–∏ —Å–æ —à–ª—é–∑–æ–º –ï–í–ú–ò–ê–°

**–ó–∞–ø—Ä–æ—Å:**

```bash
curl -X POST http://localhost:8000/health/gateway   -H "X-API-KEY: –≤–∞—à-—Ä–µ–∞–ª—å–Ω—ã–π-–∫–ª—é—á-–¥–æ—Å—Ç—É–ø–∞"
```

**–£—Å–ø–µ—à–Ω—ã–π –æ—Ç–≤–µ—Ç:**

–û—Ç–≤–µ—Ç –±—É–¥–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å –¥–∞–Ω–Ω—ã–µ, –ø–æ–ª—É—á–µ–Ω–Ω—ã–µ –æ—Ç —à–ª—é–∑–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Ç–µ–∫—É—â–µ–µ –≤—Ä–µ–º—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ —à–ª—é–∑–∞).

```json
{
  "data": {
    "current_datetime": "2024-09-07T12:00:00.000Z"
  },
  "success": true
}
```
